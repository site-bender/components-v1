---
import "./index.css"
import generateShortId from "../../utilities/generateShortId"
import mapAttribtues from "../../utilities/mapAttributes"
import type { LatestProps as Props } from "../../types"
import { CHARS } from "../../constants"

const {
  as = "aside",
  header = {},
  id = generateShortId(),
  title: ttl = "The latest",
  ...attrs
} = Astro.props

const labelId = `${id}_label`
const { as: HElement = "h2", ...hAttrs } = header

const headerAttrs = mapAttribtues(hAttrs, ["sb-latest-heading"])
const wrapperAttrs = mapAttribtues(attrs, ["sb-latest"])

const Element = as
const title = (await Astro.slots.render("title")) || ttl
---

<Element
  {...wrapperAttrs}
  aria-labelledby={labelId}
  {id}
>
  <HElement
    {...headerAttrs}
    id={labelId}
  >
    {title}
  </HElement>
  <slot />
</Element>
