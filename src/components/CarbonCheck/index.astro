---
import "./index.css"

export type Beacon = {
  href?: string
  firstCarbon: number
  grade: string
  repeatCarbon: number
}

export type Ecograder = {
  href?: string
  score: number
}

export type WebCarbon = {
  count: number
  href?: string
  percentage: number
}

export type Props = {
  beacon?: Beacon | undefined | null
  ecograder?: Ecograder | undefined | null
  webCarbon?: WebCarbon | undefined | null
}

const { beacon, webCarbon } = Astro.props
---

<article class="sb-carbon-check">
  <h2
    id="sb-carbon-check"
    class="sb-off-screen"
  >
    Carbon emissions for this page
  </h2>
  <div class="sb-carbon-percentage">
    Cleaner than {webCarbon?.percentage}% of pages tested
  </div>
  <div class="sb-carbon-count">
    <span class="sb-count">{webCarbon?.count}g of CO<sub>2</sub>/view</span>
    {
      webCarbon?.href ? (
        <a
          class="sb-carbon-logo"
          href={webCarbon.href}
          rel="external"
        >
          Website Carbon
        </a>
      ) : (
        <span class="sb-carbon-logo">Website Carbon</span>
      )
    }
  </div>
  {
    beacon ? (
      <div class="sb-carbon-count">
        <span class="sb-count">
          {beacon.firstCarbon?.toFixed(3)}g &rarr;
          {beacon.repeatCarbon?.toFixed(3)}g
        </span>
        {beacon.href ? (
          <a
            class="sb-carbon-logo"
            href={beacon.href}
            rel="external"
          >
            Beacon: <strong>{beacon.grade}</strong>
          </a>
        ) : (
          <span class="sb-carbon-logo">
            Beacon: <strong>{beacon.grade}</strong>
          </span>
        )}
      </div>
    ) : null
  }
</article>
