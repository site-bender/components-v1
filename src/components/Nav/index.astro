---
import NavList from "./NavList/index.astro"
import Microdata from "../Microdata/index.astro"
import generateShortId from "../../utilities/generateShortId"
import mapAttributes from "../../utilities/mapAttributes"
import type { NavProps as Props } from "../../types"

const { hideClass, id, links, nav = {}, properties, ...attrs } = Astro.props

const wrapperAttrs = mapAttributes(attrs, ["sb-nav"])

const labelledBy = id || generateShortId()

const useMicrodata = Boolean(import.meta.env.USE_MICRODATA)
---

{
	useMicrodata ? (
		<Microdata
			{...wrapperAttrs}
			aria-labelledby={labelledBy}
			as="nav"
			{properties}
		>
			<NavList {...nav} {links} {hideClass} />
		</Microdata>
	) : (
		<nav {...wrapperAttrs} aria-labelledby={labelledBy}>
			<NavList {...nav} {labelledBy} {links} {hideClass} />
		</nav>
	)
}
