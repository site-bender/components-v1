---
import type { ImageType } from "../../types"
import { DEFAULT_IMAGE_TYPES } from "../../constants"
import getSrcset from "./getSrcset"

const {
	createPath,
	filename,
	source: { media, sizes, types = DEFAULT_IMAGE_TYPES },
} = Astro.props

const sources = types.map((type: ImageType) => ({
	media,
	srcset: getSrcset(createPath, filename, type as ImageType, sizes),
	type: `image/${type.toString()}`,
}))
---

<>
	{sources.map((attrs) => <source {...attrs} />)}
</>
