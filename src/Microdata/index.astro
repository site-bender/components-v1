---
// Validate at https://validator.schema.org/
import type { MetadataProps as Props } from "../types"

const {
	as: Element = "span",
	microdata = {},
	property,
	properties: props = {},
	...attrs
} = Astro.props

const item = property ? { property } : {}
const { type, ...properties } = props
const itemtype = `https://schema.org/${type}`
---

<Element {...microdata} {...item} itemscope itemtype={itemtype} {...attrs}>
	{
		Object.entries(properties).map(([property, content]) =>
			typeof content === "object" ? (
				<Astro.self as="span" itemprop={property} properties={content} />
			) : (
				<meta content={content as string} itemprop={property} />
			)
		)
	}
	<slot />
</Element>
