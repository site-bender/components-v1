{
	"sourceFile": "src/form/TimeZoneField/index.astro",
	"activeCommit": 0,
	"commits": [
		{
			"activePatchIndex": 12,
			"patches": [
				{
					"date": 1688336365897,
					"content": "Index: \n===================================================================\n--- \n+++ \n"
				},
				{
					"date": 1688447284991,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,9 @@\n ---\n const { form } = Astro.props;\n ---\n \n-<div class=\"field\">\n+<div class:list={[\"sb-form-field\"]}>\n \t<label for=\"timeZone\">\n \t\t<span>TimeZone</span>\n \t\t<ul aria-live=\"assertive\" class=\"help\" role=\"status\"></ul>\n \t</label>\n"
				},
				{
					"date": 1688447470348,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,19 +1,71 @@\n ---\n-const { form } = Astro.props;\n+import generateShortId from \"../../utilities/generateShortId\";\n+import mapDataset from \"../../utilities/mapDataset\";\n+import TIME_ZONES from \"./timezones\";\n+\n+const {\n+\t[\"class:list\"]: classes = [],\n+\tdataset = {\n+\t\t\"sb-time-zone\": true,\n+\t},\n+\telementAttributes: {\n+\t\t[\"class:list\"]: elementClasses = [],\n+\t\tdataset: elementDataset = {},\n+\t\t...elementAttributes\n+\t} = {},\n+\tform,\n+\tid = generateShortId(),\n+\tincludeBlank,\n+\tname,\n+\trequired,\n+\tselected,\n+\tuseList,\n+\t...attrs\n+} = Astro.props;\n+\n+const data = mapDataset(dataset);\n+const elementData = mapDataset(elementDataset);\n+\n+const options = TIME_ZONES.map(\n+\t({ timeZone }) =>\n+\t\t`<option value=\"${timeZone}\"${\n+\t\t\tselected === timeZone ? \" selected\" : \"\"\n+\t\t}>${timeZone}</option>`\n+);\n ---\n \n-<div class:list={[\"sb-form-field\"]}>\n-\t<label for=\"timeZone\">\n-\t\t<span>TimeZone</span>\n-\t\t<ul aria-live=\"assertive\" class=\"help\" role=\"status\"></ul>\n-\t</label>\n-\t<select data-sb-time-zone form={form} id=\"timeZone\" name=\"timeZone\" required>\n-\t\t<option value=\"America/Argentina/Buenos_Aires\"\n-\t\t\t>America/Argentina/Buenos_Aires</option\n-\t\t>\n-\t\t<option value=\"Asia/Bangkok\">Asia/Bangkok</option>\n-\t\t<option value=\"Australia/Perth\">Australia/Perth</option>\n-\t\t<option value=\"Canada/Pacific\">Canada/Pacific</option>\n-\t\t<option value=\"Europe/Monaco\">Europe/Monaco</option>\n-\t</select>\n-</div>\n+<label {...attrs} class:list={[\"sb-timezone\", ...classes]} {...data} for={id}>\n+\t<span>TimeZone</span>\n+\t{\n+\t\tuseList ? (\n+\t\t\t<>\n+\t\t\t\t<input\n+\t\t\t\t\t{...elementAttributes}\n+\t\t\t\t\t{...elementData}\n+\t\t\t\t\tform={form}\n+\t\t\t\t\tid={id}\n+\t\t\t\t\tlist={`${id}_list`}\n+\t\t\t\t\tname={name}\n+\t\t\t\t\trequired={required}\n+\t\t\t\t\ttype=\"text\"\n+\t\t\t\t\tvalue={selected}\n+\t\t\t\t/>\n+\t\t\t\t<datalist id={`${id}_list`}>\n+\t\t\t\t\t<Fragment set:html={options} />\n+\t\t\t\t</datalist>\n+\t\t\t</>\n+\t\t) : (\n+\t\t\t<select\n+\t\t\t\t{...elementAttributes}\n+\t\t\t\t{...elementData}\n+\t\t\t\tform={form}\n+\t\t\t\tid={id}\n+\t\t\t\tname={name}\n+\t\t\t\trequired={required}\n+\t\t\t>\n+\t\t\t\t{includeBlank ? <option /> : null}\n+\t\t\t\t<Fragment set:html={options} />\n+\t\t\t</select>\n+\t\t)\n+\t}\n+</label>\n"
				},
				{
					"date": 1688447737699,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n import TIME_ZONES from \"./timezones\";\n \n const {\n \t[\"class:list\"]: classes = [],\n+\tcountries,\n \tdataset = {\n \t\t\"sb-time-zone\": true,\n \t},\n \telementAttributes: {\n@@ -25,9 +26,11 @@\n \n const data = mapDataset(dataset);\n const elementData = mapDataset(elementDataset);\n \n-const options = TIME_ZONES.map(\n+const options = TIME_ZONES.filter(({ countryCode }) =>\n+\tcountries ? countries.includes(countryCode) : true\n+).map(\n \t({ timeZone }) =>\n \t\t`<option value=\"${timeZone}\"${\n \t\t\tselected === timeZone ? \" selected\" : \"\"\n \t\t}>${timeZone}</option>`\n"
				},
				{
					"date": 1688509389112,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -5,11 +5,9 @@\n \n const {\n \t[\"class:list\"]: classes = [],\n \tcountries,\n-\tdataset = {\n-\t\t\"sb-time-zone\": true,\n-\t},\n+\tdataset = {},\n \telementAttributes: {\n \t\t[\"class:list\"]: elementClasses = [],\n \t\tdataset: elementDataset = {},\n \t\t...elementAttributes\n"
				},
				{
					"date": 1688510844980,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,70 +3,37 @@\n import mapDataset from \"../../utilities/mapDataset\";\n import TIME_ZONES from \"./timezones\";\n \n const {\n-\t[\"class:list\"]: classes = [],\n \tcountries,\n-\tdataset = {},\n-\telementAttributes: {\n-\t\t[\"class:list\"]: elementClasses = [],\n-\t\tdataset: elementDataset = {},\n-\t\t...elementAttributes\n-\t} = {},\n+\tdataset,\n+\telement,\n \tform,\n \tid = generateShortId(),\n \tincludeBlank,\n+\tlabel,\n \tname,\n \trequired,\n \tselected,\n \tuseList,\n+\twrapper,\n \t...attrs\n } = Astro.props;\n \n const data = mapDataset(dataset);\n-const elementData = mapDataset(elementDataset);\n-\n-const options = TIME_ZONES.filter(({ countryCode }) =>\n-\tcountries ? countries.includes(countryCode) : true\n-).map(\n-\t({ timeZone }) =>\n-\t\t`<option value=\"${timeZone}\"${\n-\t\t\tselected === timeZone ? \" selected\" : \"\"\n-\t\t}>${timeZone}</option>`\n-);\n ---\n \n-<label {...attrs} class:list={[\"sb-timezone\", ...classes]} {...data} for={id}>\n-\t<span>TimeZone</span>\n-\t{\n-\t\tuseList ? (\n-\t\t\t<>\n-\t\t\t\t<input\n-\t\t\t\t\t{...elementAttributes}\n-\t\t\t\t\t{...elementData}\n-\t\t\t\t\tform={form}\n-\t\t\t\t\tid={id}\n-\t\t\t\t\tlist={`${id}_list`}\n-\t\t\t\t\tname={name}\n-\t\t\t\t\trequired={required}\n-\t\t\t\t\ttype=\"text\"\n-\t\t\t\t\tvalue={selected}\n-\t\t\t\t/>\n-\t\t\t\t<datalist id={`${id}_list`}>\n-\t\t\t\t\t<Fragment set:html={options} />\n-\t\t\t\t</datalist>\n-\t\t\t</>\n-\t\t) : (\n-\t\t\t<select\n-\t\t\t\t{...elementAttributes}\n-\t\t\t\t{...elementData}\n-\t\t\t\tform={form}\n-\t\t\t\tid={id}\n-\t\t\t\tname={name}\n-\t\t\t\trequired={required}\n-\t\t\t>\n-\t\t\t\t{includeBlank ? <option /> : null}\n-\t\t\t\t<Fragment set:html={options} />\n-\t\t\t</select>\n-\t\t)\n-\t}\n-</label>\n+<div {...attrs} class:list={cssClasses} {...data}>\n+\t<TimeZone\n+\t\tcountries={countries}\n+\t\telement={element}\n+\t\tform={form}\n+\t\tid={id}\n+\t\tincludeBlank={includeBlank}\n+\t\tlabel={label}\n+\t\tname={name}\n+\t\trequired={required}\n+\t\tselected={selected}\n+\t\tuseList={useList}\n+\t\twrapper={wrapper}\n+\t/>\n+</div>\n"
				},
				{
					"date": 1688510938000,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,10 +1,10 @@\n ---\n import generateShortId from \"../../utilities/generateShortId\";\n import mapDataset from \"../../utilities/mapDataset\";\n-import TIME_ZONES from \"./timezones\";\n \n const {\n+\t[\"class:list\"]: classes = [],\n \tcountries,\n \tdataset,\n \telement,\n \tform,\n@@ -18,12 +18,13 @@\n \twrapper,\n \t...attrs\n } = Astro.props;\n \n+const cssClasses = [\"sb-time-zone-field\", ...classes];\n const data = mapDataset(dataset);\n ---\n \n-<div {...attrs} class:list={cssClasses} {...data}>\n+<div {...attrs} class:list={cssClasses} {...data} data-sb-time-zone-field>\n \t<TimeZone\n \t\tcountries={countries}\n \t\telement={element}\n \t\tform={form}\n"
				},
				{
					"date": 1688510967320,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n ---\n import generateShortId from \"../../utilities/generateShortId\";\n import mapDataset from \"../../utilities/mapDataset\";\n+import TimeZone from \"../elements/TimeZone/index.astro\";\n \n const {\n \t[\"class:list\"]: classes = [],\n \tcountries,\n"
				},
				{
					"date": 1688511367904,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,9 +10,9 @@\n \telement,\n \tform,\n \tid = generateShortId(),\n \tincludeBlank,\n-\tlabel,\n+\tlabel = \"Time zone\",\n \tname,\n \trequired,\n \tselected,\n \tuseList,\n"
				},
				{
					"date": 1688615661462,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,8 @@\n ---\n import generateShortId from \"../../utilities/generateShortId\";\n import mapDataset from \"../../utilities/mapDataset\";\n-import TimeZone from \"../elements/TimeZone/index.astro\";\n+import TimeZoneSelect from \"../elements/TimeZoneSelect/index.astro\";\n \n const {\n \t[\"class:list\"]: classes = [],\n \tcountries,\n@@ -24,9 +24,9 @@\n const data = mapDataset(dataset);\n ---\n \n <div {...attrs} class:list={cssClasses} {...data} data-sb-time-zone-field>\n-\t<TimeZone\n+\t<TimeZoneSelect\n \t\tcountries={countries}\n \t\telement={element}\n \t\tform={form}\n \t\tid={id}\n"
				},
				{
					"date": 1688879680287,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,31 +1,96 @@\n ---\n+import TimeZoneSelect from \"../elements/TimeZoneSelect/index.astro\";\n+import createClassList from \"../../utilities/createClassList\";\n import generateShortId from \"../../utilities/generateShortId\";\n import mapDataset from \"../../utilities/mapDataset\";\n-import TimeZoneSelect from \"../elements/TimeZoneSelect/index.astro\";\n+import type { BaseAttributes } from \"../../types/html\";\n+import type { TimeZoneField as Props } from \"../../types/form\";\n \n const {\n-\t[\"class:list\"]: classes = [],\n+\t[\"aria-live\"]: live = \"assertive\",\n \tcountries,\n-\tdataset,\n-\telement,\n+\tfield = \"time-zone-field\",\n \tform,\n+\thelp = {},\n \tid = generateShortId(),\n \tincludeBlank,\n \tlabel = \"Time zone\",\n+\tlegend = {},\n+\tmessage,\n \tname,\n+\touter = {},\n \trequired,\n-\tselected,\n-\tuseList,\n-\twrapper,\n+\ttag = {},\n+\ttype: _type,\n+\tvalue,\n+\twrapper = {},\n \t...attrs\n } = Astro.props;\n \n-const cssClasses = [\"sb-time-zone-field\", ...classes];\n-const data = mapDataset(dataset);\n+const {\n+\t[\"class:list\"]: helpClassList = [],\n+\tdataset: helpDataset,\n+\t...helpAttrs\n+} = help as BaseAttributes;\n+\n+const {\n+\t[\"class:list\"]: legendClassList = [],\n+\tdataset: legendDataset,\n+\t...legendAttrs\n+} = legend as BaseAttributes;\n+\n+const {\n+\t[\"class:list\"]: outerClassList = [],\n+\tdataset: outerDataset,\n+\t...outerAttrs\n+} = outer as BaseAttributes;\n+\n+const {\n+\t[\"class:list\"]: tagClassList = [],\n+\tdataset: tagDataset,\n+\t...tagAttrs\n+} = tag as BaseAttributes;\n+\n ---\n \n-<div {...attrs} class:list={cssClasses} {...data} data-sb-time-zone-field>\n+<div\n+\t{...outerAttrs}\n+\tclass:list={createClassList(\n+\t\t\"sb-field\",\n+\t\t\"sb-plain-date-field\",\n+\t\touterClassList\n+\t)}\n+\t{...mapDataset(outerDataset)}\n+\tdata-sb-field={field}\n+\t{...req}\n+>\n+\t<label\n+\t\t{...legendAttrs}\n+\t\tclass:list={createClassList(\"sb-label\", legendClassList)}\n+\t\t{...mapDataset(legendDataset)}\n+\t\tdata-sb-field-label={field}\n+\t\tid={labelId}\n+\t>\n+\t\t<span\n+\t\t\t{...tagAttrs}\n+\t\t\tclass:list={createClassList(\"sb-label-tag\", tagClassList)}\n+\t\t\t{...mapDataset(tagDataset)}\n+\t\t\tdata-sb-field-label-tag={field}\n+\t\t\t{...opt}\n+\t\t\tset:html={lbl}\n+\t\t/>\n+\t\t<span\n+\t\t\t{...helpAttrs}\n+\t\t\taria-live={live}\n+\t\t\tclass:list={createClassList(\"sb-help\", helpClassList)}\n+\t\t\t{...mapDataset(helpDataset)}\n+\t\t\tdata-sb-field-help={field}\n+\t\t\tid={helpId}\n+\t\t\trole=\"status\"\n+\t\t\tset:html={hlp}\n+\t\t/>\n+\t</label>\n \t<TimeZoneSelect\n \t\tcountries={countries}\n \t\telement={element}\n \t\tform={form}\n"
				},
				{
					"date": 1688879697626,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -49,8 +49,15 @@\n \t[\"class:list\"]: tagClassList = [],\n \tdataset: tagDataset,\n \t...tagAttrs\n } = tag as BaseAttributes;\n+\n+const hlp = (await Astro.slots.render(\"help\")) || message;\n+const helpId = `${id}_help`;\n+const lbl = (await Astro.slots.render(\"default\")) || label;\n+const labelId = `${id}_label`;\n+const req = required ? { \"data-sb-required\": \"\" } : {};\n+const opt = required ? {} : { \"data-sb-optional\": \"\" };\n ---\n \n <div\n \t{...outerAttrs}\n"
				},
				{
					"date": 1688879730470,
					"content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,10 +96,10 @@\n \t\t\tset:html={hlp}\n \t\t/>\n \t</label>\n \t<TimeZoneSelect\n+\t{...attrs}\n \t\tcountries={countries}\n-\t\telement={element}\n \t\tform={form}\n \t\tid={id}\n \t\tincludeBlank={includeBlank}\n \t\tlabel={label}\n"
				}
			],
			"date": 1688336365897,
			"name": "Commit-0",
			"content": "---\nconst { form } = Astro.props;\n---\n\n<div class=\"field\">\n\t<label for=\"timeZone\">\n\t\t<span>TimeZone</span>\n\t\t<ul aria-live=\"assertive\" class=\"help\" role=\"status\"></ul>\n\t</label>\n\t<select data-sb-time-zone form={form} id=\"timeZone\" name=\"timeZone\" required>\n\t\t<option value=\"America/Argentina/Buenos_Aires\"\n\t\t\t>America/Argentina/Buenos_Aires</option\n\t\t>\n\t\t<option value=\"Asia/Bangkok\">Asia/Bangkok</option>\n\t\t<option value=\"Australia/Perth\">Australia/Perth</option>\n\t\t<option value=\"Canada/Pacific\">Canada/Pacific</option>\n\t\t<option value=\"Europe/Monaco\">Europe/Monaco</option>\n\t</select>\n</div>\n"
		}
	]
}
