---
---

<script is:inline>
  function handleChanges() {
    document.querySelectorAll("form").forEach((form) => {
      function updateOutput(event) {
        const formData = new FormData(form);
        const body = JSON.stringify(
          [...formData].reduce(
            (acc, [key, value]) => ({ ...acc, [key]: value }),
            {}
          )
        );
        const output = form.querySelector("output > code");

        output.innerHTML = body;
      }

      form.addEventListener("change", updateOutput);

      updateOutput();
    });
  }

  globalThis.addEventListener("DOMContentLoaded", handleChanges);
</script>
